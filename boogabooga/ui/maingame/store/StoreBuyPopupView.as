/** StoreBuyPopupView  *	---------------------------------------------------------------------------- *  *	@author:  *		Christian Widodo [christian@avatarlabs.com]  *	---------------------------------------------------------------------------- */ 	package com.boogabooga.ui.maingame.store	{		import flash.display.Bitmap;		import flash.display.MovieClip;		import flash.events.Event;		import flash.events.EventDispatcher;		import flash.text.TextField;		import flash.text.TextFieldAutoSize;				import com.avatarlabs.utils.cache.BitmapDataManager;		import com.avatarlabs.utils.console.ConsoleBroadcaster;		import com.avatarlabs.utils.events.CustomEvent;		import com.avatarlabs.utils.userinterface.UIButton;		import com.avatarlabs.utils.userinterface.UIScroller;		import com.avatarlabs.utils.text.TextFormatting;				import com.boogabooga.data.StringsIndex;		import com.boogabooga.data.maingame.Village;		import com.boogabooga.data.gamelevel.AbstractGameObject;				public class StoreBuyPopupView extends MovieClip		{			protected var _item:AbstractGameObject;			public var ids:Array = new Array();			/**	Stage Instances **/			public var name_txt:TextField;			public var image_mc:MovieClip;			public var descriptionScroller_mc:UIScroller;			public var exit_mc:UIButton;			public var itemBackground_mc:MovieClip;			public var background_mc:MovieClip;			public var purchase1_mc:UIButton;			public var purchase2_mc:UIButton;			public var purchase3_mc:UIButton;			public var price1_mc:TextField;			public var price2_mc:TextField;			public var price3_mc:TextField;			public var quantity1_mc:TextField;			public var quantity2_mc:TextField;			public var quantity3_mc:TextField;			/**	End of Stage Instances **/						/** Constructor			  *	---------------------------------------------------------------------------- */				public function StoreBuyPopupView()				{					init();				}								public function set item( a:AbstractGameObject ):void				{					_item = a;										TextFormatting.formatTextWithFontName( name_txt, StringsIndex.getInstance().getString(String(_item.name)), "Lithos Pro Black", false, TextFieldAutoSize.LEFT );					TextFormatting.formatTextWithFontName( MovieClip(descriptionScroller_mc).content_mc.label_txt, StringsIndex.getInstance().getString(String(_item.description)), "Lithos Pro Black", false, TextFieldAutoSize.LEFT );					descriptionScroller_mc.toggleSlider();										var iconBitmap:Bitmap = new Bitmap(BitmapDataManager.getInstance().getBitmapData(_item.cacheIconId).bitmapData);						iconBitmap.width = 100;						iconBitmap.height = 100;											image_mc.addChild( iconBitmap );					iconBitmap = null;				}												public function init():void				{					exit_mc.addEventListener( "onClick", handleExitClicked, false, 0, true );					purchase1_mc.addEventListener( "onClick", handlePurchase1Clicked, false, 0, true );					purchase2_mc.addEventListener( "onClick", handlePurchase2Clicked, false, 0, true );					purchase3_mc.addEventListener( "onClick", handlePurchase3Clicked, false, 0, true );				}								public function show():void				{					visible = true;				}								public function hide():void				{					visible = false;										while( image_mc.numChildren > 0 )						image_mc.removeChildAt(0);				}								protected function handleExitClicked( event:Event ):void				{					hide();				}				protected function handlePurchase1Clicked( event:Event ):void				{					dispatchEvent( new CustomEvent("onStorePopupPurchaseClicked", {item_id:ids[0], item:_item}) );				}				protected function handlePurchase2Clicked( event:Event ):void				{					dispatchEvent( new CustomEvent("onStorePopupPurchaseClicked", {item_id:ids[1], item:_item}) );				}				protected function handlePurchase3Clicked( event:Event ):void				{					dispatchEvent( new CustomEvent("onStorePopupPurchaseClicked", {item_id:ids[2], item:_item}) );				}		}	}