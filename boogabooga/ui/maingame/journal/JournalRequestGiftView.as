/** JournalRequestGiftView  *	---------------------------------------------------------------------------- *  *	@author:  *		Christian Widodo [christian@avatarlabs.com]  *	---------------------------------------------------------------------------- */ 	package com.boogabooga.ui.maingame.journal	{		import flash.display.MovieClip;		import flash.events.Event;		import flash.events.EventDispatcher;		import flash.events.TimerEvent;		import flash.text.TextField;		import flash.text.TextFieldAutoSize;				import com.avatarlabs.utils.console.ConsoleBroadcaster;		import com.avatarlabs.utils.events.CustomEvent;		import com.avatarlabs.utils.events.EventNotificationCenter;		import com.avatarlabs.utils.sound.SoundEffectPlayer;		import com.avatarlabs.utils.text.TextFormatting;		import com.avatarlabs.utils.userinterface.DynamicUIButton;		import org.osflash.signals.Signal;				import com.boogabooga.data.SoundsIndex;		import com.boogabooga.data.StringsIndex;		import com.boogabooga.events.BoogaEvent;				public class JournalRequestGiftView extends EventDispatcher		{			protected var _contentClip:MovieClip;						protected var _exitClip:DynamicUIButton;						protected var _headerTextMinY:Number;			protected var _headerTextMaxHeight:Number;						public var onExitClicked:Signal;						/**	Stage Instances **/			public var confirmation_mc:MovieClip;			public var background_mc:MovieClip;			public var header_txt:TextField;			public var exit_mc:MovieClip;			/**	End of Stage Instances **/						/** Constructor			  *	---------------------------------------------------------------------------- */				public function JournalRequestGiftView()				{					//init();				}								public function set contentClip( m:MovieClip ):void				{					_contentClip = m;										confirmation_mc = _contentClip.confirmation_mc;					background_mc = confirmation_mc.background_mc;					background_mc.cacheAsBitmap = true;					header_txt = confirmation_mc.header_txt;										exit_mc = confirmation_mc.exit_mc;					exit_mc.mouseChildren = false;					exit_mc.cacheAsBitmap = true;										_headerTextMinY = header_txt.y;					_headerTextMaxHeight = header_txt.height;										_exitClip = new DynamicUIButton();					_exitClip.dynamicClip = exit_mc;					_exitClip.dynamicInit();				}				public function get contentClip():MovieClip { return _contentClip; }							/** init			  *	---------------------------------------------------------------------------- */				public function init():void				{					_exitClip.addEventListener( "onClick", handleExitClicked, false, 0, true );					_exitClip.addEventListener( "onSetFocus", handleExitRolledOver, false, 0, true );					_exitClip.addEventListener( "onKillFocus", handleExitRolledOut, false, 0, true );										EventNotificationCenter.getInstance().addSignalListener( BoogaEvent.ON_LANGUAGE_CHANGED, handleLanguageChanged, this );										onExitClicked = new Signal();				}							/** show			  *	---------------------------------------------------------------------------- */				public function show():void				{					TextFormatting.formatTextWithFontName( header_txt, StringsIndex.getInstance().getStringByName("GIFT_REQUESTED"), "Lithos Pro Black", false, TextFieldAutoSize.CENTER );										header_txt.y = _headerTextMinY + (_headerTextMaxHeight - header_txt.height)*.5;										_contentClip.visible = true;				}							/** hide			  *	---------------------------------------------------------------------------- */				public function hide():void				{					_contentClip.visible = false;				}							/** handleExitClicked			  *	---------------------------------------------------------------------------- */				protected function handleExitClicked( event:Event ):void				{					//SoundEffectPlayer.getInstance().setVolume( SoundsIndex.getInstance().getSoundBySoundId("sfx_mouse_click.wav").volume, 0, "sfx_mouse_click.wav" );					SoundEffectPlayer.getInstance().playLibrarySound( "sfx_mouse_click.wav", false, "sfx_mouse_click.wav", "sfx_mouse_click.wav" );										//dispatchEvent( new BoogaEvent(BoogaEvent.ON_EXIT_CONFIRMATION_CANCEL) );					onExitClicked.dispatch();				}								protected function handleExitRolledOver( event:Event ):void				{					//SoundEffectPlayer.getInstance().setVolume( SoundsIndex.getInstance().getSoundBySoundId("sfx_mouse_rollover.wav").volume, 0, "sfx_mouse_rollover.wav" );					SoundEffectPlayer.getInstance().playLibrarySound( "sfx_mouse_rollover.wav", false, "sfx_mouse_rollover.wav", "sfx_mouse_rollover.wav" );									}								protected function handleExitRolledOut( event:Event ):void				{					//EventNotificationCenter.getInstance().sendSignal( BoogaEvent.ON_TEXT_HOVER_HIDE, this );				}							/** handleLanguageChanged			  *	---------------------------------------------------------------------------- *			  *	When a language is changed, update the text accordingly.			  *	---------------------------------------------------------------------------- */				protected function handleLanguageChanged( customParameters:Object ):void				{					TextFormatting.formatTextWithFontName( header_txt, StringsIndex.getInstance().getStringByName("GIFT_REQUESTED"), "Lithos Pro Black", false, TextFieldAutoSize.CENTER );										header_txt.y = _headerTextMinY + (_headerTextMaxHeight - header_txt.height)*.5;				}		}	}