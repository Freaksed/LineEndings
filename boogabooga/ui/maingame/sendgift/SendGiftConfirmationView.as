/** SendGiftConfirmationView  *	---------------------------------------------------------------------------- *  *	@author:  *		Christian Widodo [christian@avatarlabs.com]  *	---------------------------------------------------------------------------- */ 	package com.boogabooga.ui.maingame.sendgift	{		import flash.display.MovieClip;		import flash.events.Event;		import flash.events.EventDispatcher;		import flash.events.TimerEvent;		import flash.text.TextField;		import flash.text.TextFieldAutoSize;				import com.avatarlabs.utils.console.ConsoleBroadcaster;		import com.avatarlabs.utils.events.CustomEvent;		import com.avatarlabs.utils.events.EventNotificationCenter;		import com.avatarlabs.utils.sound.SoundEffectPlayer;		import com.avatarlabs.utils.text.TextFormatting;		import com.avatarlabs.utils.userinterface.DynamicUIButton;		import org.osflash.signals.Signal;				import com.boogabooga.data.SoundsIndex;		import com.boogabooga.data.StringsIndex;		import com.boogabooga.events.BoogaEvent;				public class SendGiftConfirmationView extends EventDispatcher		{			protected var _contentClip:MovieClip;						protected var _replayClip:DynamicUIButton;			protected var _exitClip:DynamicUIButton;						protected var _multiple:Boolean;			protected var _headerTextMinY:Number;			protected var _headerTextMaxHeight:Number;						public var onReplayClicked:Signal;			public var onExitClicked:Signal;						/**	Stage Instances **/			public var background_mc:MovieClip;			public var header_txt:TextField;			public var replay_mc:MovieClip;			public var exit_mc:MovieClip;			/**	End of Stage Instances **/						/** Constructor			  *	---------------------------------------------------------------------------- */				public function SendGiftConfirmationView()				{					//init();				}								public function set contentClip( m:MovieClip ):void				{					_contentClip = m;										background_mc = _contentClip.background_mc;					background_mc.cacheAsBitmap = true;					header_txt = _contentClip.header_txt;					replay_mc = _contentClip.replay_mc;					replay_mc.mouseChildren = false;					replay_mc.cacheAsBitmap = true;										exit_mc = _contentClip.exit_mc;					exit_mc.mouseChildren = false;					exit_mc.cacheAsBitmap = true;										_headerTextMinY = header_txt.y;					_headerTextMaxHeight = header_txt.height;										_replayClip = new DynamicUIButton();					_replayClip.dynamicClip = replay_mc;					_replayClip.dynamicInit();										_exitClip = new DynamicUIButton();					_exitClip.dynamicClip = exit_mc;					_exitClip.dynamicInit();				}				public function get contentClip():MovieClip { return _contentClip; }							/** init			  *	---------------------------------------------------------------------------- */				public function init():void				{					_multiple = false;										_replayClip.addEventListener( "onClick", handleReplayClicked, false, 0, true );					_replayClip.addEventListener( "onSetFocus", handleReplayRolledOver, false, 0, true );					_replayClip.addEventListener( "onKillFocus", handleReplayRolledOut, false, 0, true );					_exitClip.addEventListener( "onClick", handleExitClicked, false, 0, true );					_exitClip.addEventListener( "onSetFocus", handleExitRolledOver, false, 0, true );					_exitClip.addEventListener( "onKillFocus", handleExitRolledOut, false, 0, true );										EventNotificationCenter.getInstance().addSignalListener( BoogaEvent.ON_LANGUAGE_CHANGED, handleLanguageChanged, this );										onReplayClicked = new Signal();					onExitClicked = new Signal();				}							/** show			  *	---------------------------------------------------------------------------- */				public function show( multiple:Boolean ):void				{					_multiple = multiple;										if( _multiple )						TextFormatting.formatTextWithFontName( header_txt, StringsIndex.getInstance().getStringByName("GIFTS_SENT"), "Lithos Pro Black", false, TextFieldAutoSize.CENTER );					else						TextFormatting.formatTextWithFontName( header_txt, StringsIndex.getInstance().getStringByName("GIFT_SENT"), "Lithos Pro Black", false, TextFieldAutoSize.CENTER );										header_txt.y = _headerTextMinY + (_headerTextMaxHeight - header_txt.height)*.5;										_contentClip.visible = true;				}							/** hide			  *	---------------------------------------------------------------------------- */				public function hide():void				{					_contentClip.visible = false;				}							/** handleReplayClicked			  *	---------------------------------------------------------------------------- */				protected function handleReplayClicked( event:Event ):void				{					//SoundEffectPlayer.getInstance().setVolume( SoundsIndex.getInstance().getSoundBySoundId("sfx_mouse_click.wav").volume, 0, "sfx_mouse_click.wav" );					SoundEffectPlayer.getInstance().playLibrarySound( "sfx_mouse_click.wav", false, "sfx_mouse_click.wav", "sfx_mouse_click.wav" );										//dispatchEvent( new BoogaEvent(BoogaEvent.ON_EXIT_CONFIRMATION_CONTINUE) );					onReplayClicked.dispatch();				}								protected function handleReplayRolledOver( event:Event ):void				{					//SoundEffectPlayer.getInstance().setVolume( SoundsIndex.getInstance().getSoundBySoundId("sfx_mouse_rollover.wav").volume, 0, "sfx_mouse_rollover.wav" );					SoundEffectPlayer.getInstance().playLibrarySound( "sfx_mouse_rollover.wav", false, "sfx_mouse_rollover.wav", "sfx_mouse_rollover.wav" );										//EventNotificationCenter.getInstance().sendSignal( BoogaEvent.ON_TEXT_HOVER_SHOW, this, {clip:_replayClip.dynamicClip, text:StringsIndex.getInstance().getStringByName("GLOBAL_PLAY")} );				}								protected function handleReplayRolledOut( event:Event ):void				{					//EventNotificationCenter.getInstance().sendSignal( BoogaEvent.ON_TEXT_HOVER_HIDE, this );				}							/** handleExitClicked			  *	---------------------------------------------------------------------------- */				protected function handleExitClicked( event:Event ):void				{					//SoundEffectPlayer.getInstance().setVolume( SoundsIndex.getInstance().getSoundBySoundId("sfx_mouse_click.wav").volume, 0, "sfx_mouse_click.wav" );					SoundEffectPlayer.getInstance().playLibrarySound( "sfx_mouse_click.wav", false, "sfx_mouse_click.wav", "sfx_mouse_click.wav" );										//dispatchEvent( new BoogaEvent(BoogaEvent.ON_EXIT_CONFIRMATION_CANCEL) );					onExitClicked.dispatch();				}								protected function handleExitRolledOver( event:Event ):void				{					//SoundEffectPlayer.getInstance().setVolume( SoundsIndex.getInstance().getSoundBySoundId("sfx_mouse_rollover.wav").volume, 0, "sfx_mouse_rollover.wav" );					SoundEffectPlayer.getInstance().playLibrarySound( "sfx_mouse_rollover.wav", false, "sfx_mouse_rollover.wav", "sfx_mouse_rollover.wav" );									}								protected function handleExitRolledOut( event:Event ):void				{					//EventNotificationCenter.getInstance().sendSignal( BoogaEvent.ON_TEXT_HOVER_HIDE, this );				}							/** handleLanguageChanged			  *	---------------------------------------------------------------------------- *			  *	When a language is changed, update the text accordingly.			  *	---------------------------------------------------------------------------- */				protected function handleLanguageChanged( customParameters:Object ):void				{					if( _multiple )						TextFormatting.formatTextWithFontName( header_txt, StringsIndex.getInstance().getStringByName("GIFTS_SENT"), "Lithos Pro Black", false, TextFieldAutoSize.CENTER );					else						TextFormatting.formatTextWithFontName( header_txt, StringsIndex.getInstance().getStringByName("GIFT_SENT"), "Lithos Pro Black", false, TextFieldAutoSize.CENTER );										header_txt.y = _headerTextMinY + (_headerTextMaxHeight - header_txt.height)*.5;				}		}	}