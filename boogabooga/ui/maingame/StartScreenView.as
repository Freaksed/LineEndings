/** StartScreenView  *	---------------------------------------------------------------------------- *  *	@author:  *		Christian Widodo [christian@avatarlabs.com]  *	---------------------------------------------------------------------------- */ 	package com.boogabooga.ui.maingame	{		import flash.display.MovieClip;		import flash.events.Event;		import flash.events.EventDispatcher;		import flash.geom.Rectangle;				import com.avatarlabs.utils.events.CustomEvent;		import com.avatarlabs.utils.navigation.NavigationController;		import com.avatarlabs.utils.sound.SoundEffectPlayer;		import com.avatarlabs.utils.userinterface.DynamicUIButton;		import org.osflash.signals.Signal;				import com.boogabooga.data.SoundsIndex;				public class StartScreenView extends EventDispatcher		{			protected var _contentClip:MovieClip;						protected var _playClip:DynamicUIButton;			protected var _messageClip:DynamicUIButton;						public var onStartScreenAnimationCompleted:Signal;						/**	Stage Instances **/			public var playContainer_mc:MovieClip;			public var play_mc:MovieClip;			public var message_mc:MovieClip;			public var mistyCloud_mc:MovieClip;			public var gameLogo_mc:MovieClip;			public var buttonBackground_mc:MovieClip;			public var messageExclamation_mc:MovieClip;			/**	End of Stage Instances **/						/** Constructor			  *	---------------------------------------------------------------------------- */				public function StartScreenView()				{					//init();				}								public function set contentClip( m:MovieClip ):void				{					_contentClip = m;					_contentClip.scrollRect = new Rectangle( 0, 0, 760, 625 );					_contentClip.cacheAsBitmap = true;										playContainer_mc = _contentClip.playContainer_mc;					play_mc = playContainer_mc.play_mc;					message_mc = _contentClip.message_mc;					mistyCloud_mc = _contentClip.mistyCloud_mc;					gameLogo_mc = _contentClip.gameLogo_mc;					buttonBackground_mc = _contentClip.buttonBackground_mc;					messageExclamation_mc = _contentClip.messageExclamation_mc;										_playClip = new DynamicUIButton();					_playClip.dynamicClip = play_mc;					_playClip.dynamicInit();										_messageClip = new DynamicUIButton();					_messageClip.dynamicClip = message_mc;					_messageClip.dynamicInit();										_contentClip.stop();										_contentClip.addEventListener( "onPlayRevealSound", handlePlayRevealSound, false, 0, true );					_contentClip.addEventListener( "onPlayLoopSound", handlePlayLoopSound, false, 0, true );					_contentClip.addEventListener( "onStartScreenAnimationCompleted", handleStartScreenAnimationCompleted, false, 0, true );									}				public function get contentClip():MovieClip { return _contentClip; }							/** init			  *	---------------------------------------------------------------------------- *			  *	---------------------------------------------------------------------------- */				public function init():void				{					_playClip.addEventListener( "onClick", handlePlayClicked, false, 0, true );					_playClip.addEventListener( "onSetFocus", handlePlayRolledOver, false, 0, true );					_messageClip.addEventListener( "onClick", handleMessageClicked, false, 0, true );					_messageClip.addEventListener( "onSetFocus", handleMessageRolledOver, false, 0, true );										onStartScreenAnimationCompleted = new Signal();										messageExclamation_mc = message_mc.asset_mc.exclamation_mc;					messageExclamation_mc.visible = false;				}								protected function handlePlayRevealSound( event:Event ):void				{					trace( "handlePlayRevealSound();" );					//SoundEffectPlayer.getInstance().setVolume( SoundsIndex.getInstance().getSoundBySoundId("splash_screen_reveal_sound.mp3").volume, 0, "SplashScreenRevealSound" );					SoundEffectPlayer.getInstance().playLibrarySound( "splash_screen_reveal_sound.mp3", false, "splash_screen_reveal_sound.mp3", "splash_screen_reveal_sound.mp3" );				}								protected function handlePlayLoopSound( event:Event ):void				{					trace( "handlePlayLoopSound();" );					//SoundEffectPlayer.getInstance().setVolume( SoundsIndex.getInstance().getSoundBySoundId("music_loop_splash_screen.wav").volume, 0, "SplashScreenMusicLoop" );					SoundEffectPlayer.getInstance().playLibrarySound( "music_loop_splash_screen.wav", true, "SplashScreenMusicLoop", "music_loop_splash_screen.wav" );				}								private function handleStartScreenAnimationCompleted( event:Event ):void				{					onStartScreenAnimationCompleted.dispatch();				}							/** handlePlayClicked			  *	---------------------------------------------------------------------------- *			  *	---------------------------------------------------------------------------- */				protected function handlePlayClicked( event:Event ):void				{					//NavigationController.getInstance().navigateTo( 0, "MainNavigation" );										//SoundEffectPlayer.getInstance().setVolume( SoundsIndex.getInstance().getSoundBySoundId("sfx_mouse_click.wav").volume, 0, "sfx_mouse_click.wav" );					SoundEffectPlayer.getInstance().playLibrarySound( "sfx_mouse_click.wav", false, "sfx_mouse_click.wav", "sfx_mouse_click.wav" );										dispatchEvent( new CustomEvent("onPlayClicked") );					_contentClip.visible = false;									}								protected function handlePlayRolledOver( event:Event ):void				{					//SoundEffectPlayer.getInstance().setVolume( SoundsIndex.getInstance().getSoundBySoundId("sfx_mouse_rollover.wav").volume, 0, "sfx_mouse_rollover.wav" );					SoundEffectPlayer.getInstance().playLibrarySound( "sfx_mouse_rollover.wav", false, "sfx_mouse_rollover.wav", "sfx_mouse_rollover.wav" );									}								protected function handlePlayRolledOut( event:Event ):void				{									}							/** handleMessageClicked			  *	---------------------------------------------------------------------------- *			  *	---------------------------------------------------------------------------- */				protected function handleMessageClicked( event:Event ):void				{					//NavigationController.getInstance().navigateTo( 5, "MainNavigation" );										//SoundEffectPlayer.getInstance().setVolume( SoundsIndex.getInstance().getSoundBySoundId("sfx_mouse_click.wav").volume, 0, "sfx_mouse_click.wav" );					SoundEffectPlayer.getInstance().playLibrarySound( "sfx_mouse_click.wav", false, "sfx_mouse_click.wav", "sfx_mouse_click.wav" );										dispatchEvent( new CustomEvent("onMessageClicked") );					//visible = false;				}								protected function handleMessageRolledOver( event:Event ):void				{					//SoundEffectPlayer.getInstance().setVolume( SoundsIndex.getInstance().getSoundBySoundId("sfx_mouse_rollover.wav").volume, 0, "sfx_mouse_rollover.wav" );					SoundEffectPlayer.getInstance().playLibrarySound( "sfx_mouse_rollover.wav", false, "sfx_mouse_rollover.wav", "sfx_mouse_rollover.wav" );									}								protected function handleMessageRolledOut( event:Event ):void				{									}							/** kill			  *	---------------------------------------------------------------------------- *			  *	---------------------------------------------------------------------------- */				public function kill():void				{					_contentClip.removeEventListener( "onPlayRevealSound", handlePlayRevealSound );					_contentClip.removeEventListener( "onPlayLoopSound", handlePlayLoopSound );					_contentClip.removeEventListener( "onStartScreenAnimationCompleted", handleStartScreenAnimationCompleted );										onStartScreenAnimationCompleted = null;										_playClip.removeEventListener( "onClick", handlePlayClicked );					_messageClip.removeEventListener( "onClick", handleMessageClicked );					mistyCloud_mc.stop();					playContainer_mc.stop();				}										}	}