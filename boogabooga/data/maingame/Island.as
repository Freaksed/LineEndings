/** Island  *	---------------------------------------------------------------------------- *  *	@desc:  *		Island data class  *	@author:   *		Christian Widodo, [christian@avatarlabs.com]  *	---------------------------------------------------------------------------- */	package com.boogabooga.data.maingame	{		import flash.events.Event;		import flash.events.EventDispatcher;		import flash.events.IOErrorEvent;		import flash.events.FullScreenEvent;		import flash.events.ProgressEvent;		import flash.external.ExternalInterface;		import flash.net.URLLoader;		import flash.net.URLRequest;		import flash.net.URLRequestMethod;		import flash.net.URLVariables;				import com.avatarlabs.utils.VectorUtil;		import com.avatarlabs.utils.UtilFunctions;		import com.avatarlabs.utils.events.CustomEvent;		import com.avatarlabs.utils.events.EventNotificationCenter;		import com.avatarlabs.utils.console.ConsoleBroadcaster;				import com.boogabooga.data.gamelevel.AbstractGameObject;		import com.boogabooga.data.maingame.*;				public class Island extends Object		{			protected var _id:int;			protected var _islandOrder:int;			protected var _name:String;			protected var _description:int;			protected var _iconURL:String;			protected var _cacheIconId:String;			protected var _backgroundURL:String;			protected var _backgroundLinkageId:String;			protected var _createdBy:String;			protected var _villages:Vector.<Village>;			protected var _locked:Boolean;			protected var _digTimer:int;			//protected var _lastDigInterval:int;	// in seconds			protected var _lastDigTime:Number;	// in unix timestamp			protected var _nextDigTime:Number;						/** Constructor			  *	---------------------------------------------------------------------- */				public function Island()				{					init();				}							/** init			  *	---------------------------------------------------------------------- */				public function init():void				{					_villages = new Vector.<Village>;					_locked = true;				}							/** set/get id			  *	---------------------------------------------------------------------- */				public function set id( u:uint ):void { _id = u; }				public function get id():uint { return _id; }								public function set islandOrder( i:int ):void { _islandOrder = i; }				public function get islandOrder():int { return _islandOrder; }								public function set name( s:String ):void { _name = s; }				public function get name():String { return _name; }								public function set description( i:int ):void { _description = i; }				public function get description():int { return _description; }								public function set iconURL( s:String ):void { _iconURL = s; }				public function get iconURL():String { return _iconURL; }								public function set cacheIconId( s:String ):void { _cacheIconId = s; }				public function get cacheIconId():String { return _cacheIconId; }								public function set backgroundURL( s:String ):void { _backgroundURL = s; }				public function get backgroundURL():String { return _backgroundURL; }								public function set backgroundLinkageId( s:String ):void { _backgroundLinkageId = s; }				public function get backgroundLinkageId():String { return _backgroundLinkageId; }								public function set createdBy( s:String ):void { _createdBy = s; }				public function get createdBy():String { return _createdBy; }								//public function set villages( v:Vector.<Village> ):void { _villages = v; }				public function get villages():Vector.<Village> { return _villages; }				public function get unlockedVillagesCount():int				{					var count:int = 0;					for( var i:int=0; i<_villages.length; ++i )					{						if( !_villages[i].locked )							++count;					}										return count;				}								public function set locked( b:Boolean ):void { _locked = b; }				public function get locked():Boolean { return _locked; }								public function set digTimer( i:int ):void { _digTimer = i; }				public function get digTimer():int { return _digTimer; }				/*				public function set lastDigInterval( i:int ):void				{					_lastDigInterval = i;										//_nextDigTime = new Date();					//_nextDigTime.seconds = _digTimer - lastDigInterval;				}				public function get lastDigInterval():int { return _lastDigInterval; }				*/				public function set lastDigTime( n:Number ):void				{					_lastDigTime = n*1000;					_nextDigTime = _lastDigTime + _digTimer*1000;				}				public function get lastDigTime():Number { return _lastDigTime; }								public function get nextDigTime():Number { return _nextDigTime; }								public function getVillage( villageId:int ):Village				{					for( var i:int=0; i<_villages.length; ++i )					{						if( _villages[i].id == villageId )							return _villages[i];					}										return null;				}								public function getVillageAfter( villageId:int ):Village				{					for( var i:int=0; i<_villages.length; ++i )					{						if( (_villages[i].id == villageId) && (i != _villages.length-1) )							return _villages[i+1];					}										return null;				}								public function clone():Island				{					var clonedObject:Island = UtilFunctions.clone( this ) as Island;										for( var i:int=0; i<_villages.length; ++i )					{						clonedObject.villages.push( _villages[i].clone() );					}										//trace( "villages length "+_villages.length );					//trace( "cloned villages length: "+clonedObject.villages.length );										return clonedObject;				}		}			}