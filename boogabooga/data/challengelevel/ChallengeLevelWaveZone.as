/** ChallengeLevelWaveZone  *	---------------------------------------------------------------------------- *  *	@desc:  *		ChallengeLevelWaveZone data class  *	@author:   *		Christian Widodo, [christian@avatarlabs.com]  *	---------------------------------------------------------------------------- */	package com.boogabooga.data.challengelevel	{		import flash.events.Event;		import flash.events.EventDispatcher;		import flash.events.IOErrorEvent;		import flash.events.FullScreenEvent;		import flash.events.ProgressEvent;		import flash.external.ExternalInterface;		import flash.net.URLLoader;		import flash.net.URLRequest;		import flash.net.URLRequestMethod;		import flash.net.URLVariables;				import com.adobe.serialization.json.JSONEncoder;		import com.avatarlabs.utils.ArrayUtil;		import com.avatarlabs.utils.cache.HashTable;		import com.avatarlabs.utils.events.CustomEvent;		import com.avatarlabs.utils.events.EventNotificationCenter;		import com.avatarlabs.utils.console.ConsoleBroadcaster;				import com.boogabooga.data.gamelevel.AbstractGameObject;		import com.boogabooga.data.maingame.*;		import com.boogabooga.ui.gamelevel.GameboardTile;				public class ChallengeLevelWaveZone extends Object		{			protected var _id:int;			protected var _name:String;			protected var _waveZoneSections:Vector.<ChallengeLevelWaveZoneSection>;			protected var _totalNumberOfEnemies:uint;			protected var _paths:Vector.<Vector.<GameboardTile>>;			protected var _spawnPaths:Vector.<Vector.<GameboardTile>>;						protected var _startDelayInterval:Number;						public static const WAVE_ZONE_RIGHT:String = "WaveZoneRight";			public static const WAVE_ZONE_DOWN:String = "WaveZoneDown";			public static const WAVE_ZONE_LEFT:String = "WaveZoneLeft";						public static var WAVE_ZONE_RIGHT_INDEX:int;			public static var WAVE_ZONE_DOWN_INDEX:int;			public static var WAVE_ZONE_LEFT_INDEX:int;						/** Constructor			  *	---------------------------------------------------------------------- */				public function ChallengeLevelWaveZone()				{					init();				}							/** init			  *	---------------------------------------------------------------------- */				public function init():void				{					_waveZoneSections = new Vector.<ChallengeLevelWaveZoneSection>;					_paths = new Vector.<Vector.<GameboardTile>>;					_spawnPaths = new Vector.<Vector.<GameboardTile>>;					_totalNumberOfEnemies = 0;										_chickenSpawnRateMin = 1000;					_chickenSpawnRateMax = 2000;					_spawnIntervalMin = 15000;					_spawnIntervalMax = 15000;					_spawnIntervalDecreasedPercentage = 0;					_waveIntervalMin = 15000;					_waveIntervalMax = 15000;					_waveIntervalDecreasedPercentage = 0;					_startDelayInterval = 1000;										WAVE_ZONE_RIGHT_INDEX = HashTable.getInstance().addHash( WAVE_ZONE_RIGHT );					WAVE_ZONE_DOWN_INDEX = HashTable.getInstance().addHash( WAVE_ZONE_DOWN );					WAVE_ZONE_LEFT_INDEX = HashTable.getInstance().addHash( WAVE_ZONE_LEFT );				}								public function set id( i:int ):void { _id = i; }				public function get id():int { return _id; }				public function set name( s:String ):void { _name = s; }				public function get name():String { return _name; }							/** waveZoneSections			  *	---------------------------------------------------------------------- */			  	public function set waveZoneSections( w:Vector.<ChallengeLevelWaveZoneSection> ):void				{					_waveZoneSections = w;										_totalNumberOfEnemies = 0;										for( var i:int=0; i<_waveZoneSections.length; ++i )					{						_totalNumberOfEnemies += _waveZoneSections[i].totalNumberOfEnemies;					}				}				public function get waveZoneSections():Vector.<ChallengeLevelWaveZoneSection> { return _waveZoneSections; }							/** get totalNumberOfEnemies			  *	---------------------------------------------------------------------- */				public function get totalNumberOfEnemies():uint { return _totalNumberOfEnemies; }							/** set/get chickenSpawnRateMin			  *	---------------------------------------------------------------------- */				public function set chickenSpawnRateMin( u:uint ):void { _chickenSpawnRateMin = u; }				public function get chickenSpawnRateMin():uint { return _chickenSpawnRateMin; }								public function set chickenSpawnRateMax( u:uint ):void { _chickenSpawnRateMax = u; }				public function get chickenSpawnRateMax():uint { return _chickenSpawnRateMax; }								public function set spawnIntervalMin( n:Number ):void { _spawnIntervalMin = n; }				public function get spawnIntervalMin():Number { return _spawnIntervalMin; }				public function set spawnIntervalMax( n:Number ):void { _spawnIntervalMax = n; }				public function get spawnIntervalMax():Number { return _spawnIntervalMax; }				public function set spawnIntervalDecreasedPercentage( n:Number ):void { _spawnIntervalDecreasedPercentage = n; }				public function get spawnIntervalDecreasedPercentage():Number { return _spawnIntervalDecreasedPercentage; }								public function set waveIntervalMin( n:Number ):void { _waveIntervalMin = n; }				public function get waveIntervalMin():Number { return _waveIntervalMin; }				public function set waveIntervalMax( n:Number ):void { _waveIntervalMax = n; }				public function get waveIntervalMax():Number { return _waveIntervalMax; }				public function set waveIntervalDecreasedPercentage( n:Number ):void { _waveIntervalDecreasedPercentage = n; }				public function get waveIntervalDecreasedPercentage():Number { return _waveIntervalDecreasedPercentage; }								public function set startDelayInterval( n:Number ):void { _startDelayInterval = n; }				public function get startDelayInterval():Number { return _startDelayInterval; }				public function get paths():Vector.<Vector.<GameboardTile>> { return _paths; }				public function get spawnPaths():Vector.<Vector.<GameboardTile>> { return _spawnPaths; }							/** distinctEnemiesInWaveZone			  *	---------------------------------------------------------------------- 				public function get distinctEnemiesInWaveZone():Array				{					var enemies:Array = new Array();					var i:int, j:int;					var enemyObject;					var distinctEnemyObject;										for( i=0; i<_waveZoneSections.length; ++i )					{						for( j=0; j<_waves[i].enemiesLength; ++j )						{							enemyObject = ArrayUtil.find( enemies, _waves[i].enemies[j], "enemy" );							if( enemyObject == null )								enemies.push( {enemy:_waves[i].enemies[j].enemy, quantity:_waves[i].enemies[j].quantity} );							else								enemyObject.quantity += _waves[i].enemies[j].quantity;						}					}										//trace( "enemiesInWaveZone: "+enemies );										//trace( new JSONEncoder(_waves).getString() );										return enemies;				}*/							/** addWave			  *	---------------------------------------------------------------------- */				public function addWaveZoneSection( wave:ChallengeLevelWaveZoneSection ):void				{					_waveZoneSections.push( wave );					_totalNumberOfEnemies += wave.totalNumberOfEnemies;				}											/** serialize			  *	---------------------------------------------------------------------- */				public function serialize():Object				{					var serializedData:Object = new Object();						serializedData.sdi = _startDelayInterval;						serializedData.simin = _spawnIntervalMin;						serializedData.simax = _spawnIntervalMax;						serializedData.sidp = _spawnIntervalDecreasedPercentage;						serializedData.wimin = _waveIntervalMin;						serializedData.wimax = _waveIntervalMax;						serializedData.widp = _waveIntervalDecreasedPercentage;						serializedData.wzs = new Array();										for( var i:uint=0; i<_waveZoneSections.length; ++i )					{						serializedData.wzs.push( _waveZoneSections[i].serialize() );					}										return serializedData;				}							/** deserialize			  *	---------------------------------------------------------------------- */				public function deserialize( serializedData:String ):void				{									}		}			}