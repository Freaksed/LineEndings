/** ChallengeLevelWaveZoneSection  *	---------------------------------------------------------------------------- *  *	@desc:  *		ChallengeLevelWaveZoneSection data class  *	@author:   *		Christian Widodo, [christian@avatarlabs.com]  *	---------------------------------------------------------------------------- */	package com.boogabooga.data.challengelevel	{		import flash.events.Event;		import flash.events.EventDispatcher;		import flash.events.IOErrorEvent;		import flash.events.FullScreenEvent;		import flash.events.ProgressEvent;		import flash.external.ExternalInterface;		import flash.net.URLLoader;		import flash.net.URLRequest;		import flash.net.URLRequestMethod;		import flash.net.URLVariables;				import com.adobe.serialization.json.JSONEncoder;		import com.avatarlabs.utils.ArrayUtil;		import com.avatarlabs.utils.cache.HashTable;		import com.avatarlabs.utils.events.CustomEvent;		import com.avatarlabs.utils.events.EventNotificationCenter;		import com.avatarlabs.utils.console.ConsoleBroadcaster;				import com.boogabooga.data.gamelevel.AbstractGameObject;		import com.boogabooga.data.gamelevel.Wave;		import com.boogabooga.data.maingame.*;		import com.boogabooga.ui.gamelevel.GameboardTile;				public class ChallengeLevelWaveZoneSection extends Object		{			protected var _id:int;			protected var _name:String;			protected var _waves:Vector.<Wave>;			protected var _totalNumberOfEnemies:uint;						protected var _chickenSpawnRateMin:uint;  // how many second it takes for a chicken to spawn			protected var _chickenSpawnRateMax:uint;			protected var _waveStart:int;			protected var _waveEnd:int;			protected var _spawnIntervalMin:Number;			protected var _spawnIntervalMax:Number;			protected var _spawnIntervalDecreasedPercentage:Number;			protected var _waveIntervalMin:Number;			protected var _waveIntervalMax:Number;			protected var _waveIntervalDecreasedPercentage:Number;			protected var _startDelayInterval:Number;						/** Constructor			  *	---------------------------------------------------------------------- */				public function ChallengeLevelWaveZoneSection()				{					init();				}							/** init			  *	---------------------------------------------------------------------- */				public function init():void				{					_waves = new Vector.<Wave>;					_totalNumberOfEnemies = 0;										_chickenSpawnRateMin = 1000;					_chickenSpawnRateMax = 2000;					_spawnIntervalMin = 15000;					_spawnIntervalMax = 15000;					_spawnIntervalDecreasedPercentage = 0;					_waveIntervalMin = 15000;					_waveIntervalMax = 15000;					_waveIntervalDecreasedPercentage = 0;					_startDelayInterval = 1000;									}								public function set id( i:int ):void { _id = i; }				public function get id():int { return _id; }				public function set name( s:String ):void { _name = s; }				public function get name():String { return _name; }							/** waves			  *	---------------------------------------------------------------------- */			  	public function set waves( w:Vector.<Wave> ):void				{					_waves = w;										_totalNumberOfEnemies = 0;										for( var i:int=0; i<_waves.length; ++i )					{						_totalNumberOfEnemies += _waves[i].totalNumberOfEnemies;					}				}				public function get waves():Vector.<Wave> { return _waves; }							/** get totalNumberOfEnemies			  *	---------------------------------------------------------------------- */				public function get totalNumberOfEnemies():uint { return _totalNumberOfEnemies; }							/** set/get chickenSpawnRateMin			  *	---------------------------------------------------------------------- */				public function set chickenSpawnRateMin( u:uint ):void { _chickenSpawnRateMin = u; }				public function get chickenSpawnRateMin():uint { return _chickenSpawnRateMin; }								public function set chickenSpawnRateMax( u:uint ):void { _chickenSpawnRateMax = u; }				public function get chickenSpawnRateMax():uint { return _chickenSpawnRateMax; }								public function set spawnIntervalMin( n:Number ):void { _spawnIntervalMin = n; }				public function get spawnIntervalMin():Number { return _spawnIntervalMin; }				public function set spawnIntervalMax( n:Number ):void { _spawnIntervalMax = n; }				public function get spawnIntervalMax():Number { return _spawnIntervalMax; }				public function set spawnIntervalDecreasedPercentage( n:Number ):void { _spawnIntervalDecreasedPercentage = n; }				public function get spawnIntervalDecreasedPercentage():Number { return _spawnIntervalDecreasedPercentage; }								public function set waveIntervalMin( n:Number ):void { _waveIntervalMin = n; }				public function get waveIntervalMin():Number { return _waveIntervalMin; }				public function set waveIntervalMax( n:Number ):void { _waveIntervalMax = n; }				public function get waveIntervalMax():Number { return _waveIntervalMax; }				public function set waveIntervalDecreasedPercentage( n:Number ):void { _waveIntervalDecreasedPercentage = n; }				public function get waveIntervalDecreasedPercentage():Number { return _waveIntervalDecreasedPercentage; }								public function set startDelayInterval( n:Number ):void { _startDelayInterval = n; }				public function get startDelayInterval():Number { return _startDelayInterval; }							/** distinctEnemiesInWaveZone			  *	---------------------------------------------------------------------- */				public function get distinctEnemiesInWaveZone():Array				{					var enemies:Array = new Array();					var i:int, j:int;					var enemyObject;					var distinctEnemyObject;										for( i=0; i<_waves.length; ++i )					{						for( j=0; j<_waves[i].enemiesLength; ++j )						{							enemyObject = ArrayUtil.find( enemies, _waves[i].enemies[j], "enemy" );							if( enemyObject == null )								enemies.push( {enemy:_waves[i].enemies[j].enemy, quantity:_waves[i].enemies[j].quantity} );							else								enemyObject.quantity += _waves[i].enemies[j].quantity;						}					}										//trace( "enemiesInWaveZone: "+enemies );										//trace( new JSONEncoder(_waves).getString() );										return enemies;				}							/** addWave			  *	---------------------------------------------------------------------- */				public function addWave( wave:Wave ):void				{					_waves.push( wave );					_totalNumberOfEnemies += wave.totalNumberOfEnemies;				}											/** serialize			  *	---------------------------------------------------------------------- */				public function serialize():Object				{					var serializedData:Object = new Object();						serializedData.sdi = _startDelayInterval;						serializedData.simin = _spawnIntervalMin;						serializedData.simax = _spawnIntervalMax;						serializedData.sidp = _spawnIntervalDecreasedPercentage;						serializedData.wimin = _waveIntervalMin;						serializedData.wimax = _waveIntervalMax;						serializedData.widp = _waveIntervalDecreasedPercentage;						serializedData.waves = new Array();										for( var i:uint=0; i<_waves.length; ++i )					{						serializedData.waves.push( _waves[i].serialize() );					}										return serializedData;				}							/** deserialize			  *	---------------------------------------------------------------------- */				public function deserialize( serializedData:String ):void				{									}		}			}